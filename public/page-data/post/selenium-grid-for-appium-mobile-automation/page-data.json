{"componentChunkName":"component---src-templates-post-js","path":"/post/selenium-grid-for-appium-mobile-automation/","result":{"data":{"post":{"id":"5b89e2af-aa9b-523e-9372-c4a8586ea80b","title":"Selenium Grid for Appium mobile automation","date":"May 15, 2016","excerpt":"Often we wanted to perform mobile execution in parallel. The best way of performing the parallel execution is through selenium grid. I've…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Selenium Grid for Appium mobile automation\",\n  \"date\": \"2016-05-15\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Often we wanted to perform mobile execution in parallel. The best way of performing the parallel execution is through selenium grid. I\\u2019ve faced few issues while setting up the grid for appium. I\\u2019ll share my learnings about setting up the grid for appium mobile automation.\"), mdx(\"h2\", {\n    \"id\": \"pre-requisites\"\n  }, \"Pre-requisites\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://selenium-release.storage.googleapis.com/2.53/selenium-server-standalone-2.53.0.jar\"\n  }), \"Download selenium standalone server jar file\"), \" - At the time of writing, the version of latest selenium is 2.53.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"http://appium.io/\"\n  }), \"Appium\"), \" - The version that I was using is 1.4.16 and installed as Node npm package. I recommend to\\xA0you also use npm package.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Atleast two android devices for this experiment.\")), mdx(\"h2\", {\n    \"id\": \"setup-the-selenium-grid\"\n  }, \"Setup the selenium grid\"), mdx(\"p\", null, \"Place the downloaded selenium standalone server jar in some directory. In my case I\\u2019ve placed in\\xA0/Users/{username}/Tools/selenium.\"), mdx(\"p\", null, \"Open your terminal and navigate to the directory to where you placed the jar file and execute the following command:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"java -jar selenium-server-standalone-2.53.0.jar -role hub\\n\")), mdx(\"p\", null, \"This will start the selenium grid server in your local ip with the default port of \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"4444\"), \". After you see this message \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Selenium Grid hub is up and running\"), \", open your browser and hit the following url: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://%7Byour\"\n  }), \"http://{your\"), \" ip}:4444/grid/console and you should be able to see the following in your browser:\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"420px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"11.328125%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsSAAALEgHS3X78AAAAZklEQVQI12NYsmz1/8yCjv+JeV1Q3Pk/Lrv9f2Ra8//IdOJwdEbL/+DE+v+NPYv/M2zbfuT/vMVb/m/YeuD/6g17/q/euOf/ouVb/0+etfL/1Dmr/0+dvYowBqqbNHPF/517j/8HAH9haVPeizTCAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Selenium Grid console page\",\n    \"title\": \"Selenium Grid console page\",\n    \"src\": \"/static/64daf953d08b714a4c307d7c4124e9e1/635b1/Screen-Shot-2016-05-15-at-4.18.35-PM-1024x116.png\",\n    \"srcSet\": [\"/static/64daf953d08b714a4c307d7c4124e9e1/759d4/Screen-Shot-2016-05-15-at-4.18.35-PM-1024x116.png 105w\", \"/static/64daf953d08b714a4c307d7c4124e9e1/6a467/Screen-Shot-2016-05-15-at-4.18.35-PM-1024x116.png 210w\", \"/static/64daf953d08b714a4c307d7c4124e9e1/635b1/Screen-Shot-2016-05-15-at-4.18.35-PM-1024x116.png 420w\", \"/static/64daf953d08b714a4c307d7c4124e9e1/b2a12/Screen-Shot-2016-05-15-at-4.18.35-PM-1024x116.png 630w\", \"/static/64daf953d08b714a4c307d7c4124e9e1/04a72/Screen-Shot-2016-05-15-at-4.18.35-PM-1024x116.png 840w\", \"/static/64daf953d08b714a4c307d7c4124e9e1/3b243/Screen-Shot-2016-05-15-at-4.18.35-PM-1024x116.png 1024w\"],\n    \"sizes\": \"(max-width: 420px) 100vw, 420px\",\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(\"p\", null, \"Congratulations!!! You started your grid successfully. Let\\u2019s setup the nodes for our mobile devices.\"), mdx(\"h2\", {\n    \"id\": \"setup-the-appium-nodes\"\n  }, \"Setup the Appium nodes\"), mdx(\"p\", null, \"I\\u2019ve two devices with me now, samsung S4 and samsung S5. I\\u2019m going to setup grid nodes for these two devices.\"), mdx(\"p\", null, \"As per the documentation of appium \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://appium.io/slate/en/master/?ruby#selenium-grid\"\n  }), \"here\"), \", we need a node config json file to hook our appium node to our selenium grid hub. Let\\u2019s prepare our 1st node config json and I\\u2019m calling that as \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"node_s4.json\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"{\\n  \\\"capabilities\\\": [{\\n    \\\"applicationName\\\": \\\"Samsung S4\\\",\\n    \\\"browserName\\\": \\\"Samsung S4\\\",\\n    \\\"platformName\\\": \\\"ANDROID\\\",\\n    \\\"maxInstances\\\": 1\\n  }],\\n  \\\"configuration\\\": {\\n    \\\"cleanUpCycle\\\": 2000,\\n    \\\"timeout\\\": 30000,\\n    \\\"proxy\\\": \\\"org.openqa.grid.selenium.proxy.DefaultRemoteProxy\\\",\\n    \\\"host\\\": \\\"127.0.0.1\\\",\\n    \\\"port\\\": 4723,\\n    \\\"maxSession\\\": 1,\\n    \\\"register\\\": true,\\n    \\\"registerCycle\\\": 5000,\\n    \\\"hubPort\\\": 4444,\\n    \\\"hubHost\\\": \\\"192.168.0.198\\\"\\n  }\\n}\\n\")), mdx(\"p\", null, \"Here \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"applicationName\"), \" is mandatory since the\\xA0grid identifies to which appium node the job should b e routed. Also, make sure you change the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"hubHost\"), \" to your ip address.\"), mdx(\"p\", null, \"Now let\\u2019s start our appium node with this node config. In your terminal, start your appium like this:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"appium --nodeconfig /Users/{username}/Tools/selenium/node_s4.json -p 4723 -bp 4724 -U {s4 device id}\\n\")), mdx(\"p\", null, \"This will start the appium server on the port 4723 and the bootstrap port 4724 (remember, the bootstrap port is mandatory for android devices) and with the device id of your device which you can get from\\xA0\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"adb devices\"), \".\"), mdx(\"p\", null, \"Now refresh your grid console in your browser and you should see this:\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"./Screen-Shot-2016-05-15-at-5.02.03-PM-1024x210.png\",\n    \"alt\": \"Grid console with S4 device\"\n  }))), mdx(\"p\", null, \"Do the same for another device. In my case, the node json for samsung S5 device will look like:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"{\\n  \\\"capabilities\\\": [{\\n    \\\"applicationName\\\": \\\"Samsung S5\\\",\\n    \\\"browserName\\\": \\\"Samsung S5\\\",\\n    \\\"platformName\\\": \\\"ANDROID\\\",\\n    \\\"maxInstances\\\": 1\\n  }],\\n  \\\"configuration\\\": {\\n    \\\"cleanUpCycle\\\": 2000,\\n    \\\"timeout\\\": 30000,\\n    \\\"proxy\\\": \\\"org.openqa.grid.selenium.proxy.DefaultRemoteProxy\\\",\\n    \\\"host\\\": \\\"127.0.0.1\\\",\\n    \\\"port\\\": 4730,\\n    \\\"maxSession\\\": 1,\\n    \\\"register\\\": true,\\n    \\\"registerCycle\\\": 5000,\\n    \\\"hubPort\\\": 4444,\\n    \\\"hubHost\\\": \\\"<<your ip>>\\\"\\n  }\\n}\\n\")), mdx(\"p\", null, \"Changed the applicationName, browserName and port of appium node, and saved the file as \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"node_s5.json\"), \". Now start your 2nd appium node in another terminal like this:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"appium --nodeconfig /Users/{username}/Tools/selenium/node_s5.json -p 4730 -bp 4731 -U {s5 device id}\\n\")), mdx(\"p\", null, \"Refresh your browser and you should see this in your grid console page:\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"420px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"20.703125%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAAA+0lEQVQY022K20vCcACF9wd28zG7MLGMyGVBFzUrpTZjVGARRVKPPQhJhRD9Ky6jh22KbnQzqOn62m/US/Rw+DjnfNLJcRl5Jk88pRNLFpGTGtFEgeHxDJGJLJHJLIPRVQZGV0KOBJuI+AV/naGxNDGliLR3WEbbP2V9+4DcVokN7Yi5JZW4skkiVUCezaHuCueMteBfTO+gLKssZHSmg39qXnj50NNL50jGY4t6w+KiUqV6c0vDdjEsJ6RI3ezgdj9odp4Dz+a6dsflVQ3DbPPQeuL+xzNMB9t9RTLtF6zmOz3/C6/nh/wbr+/Tdt4w7S6fnh/0frj9530DiPHzbfrQJgIAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Grid console with S5\",\n    \"title\": \"Grid console with S5\",\n    \"src\": \"/static/7af7d1ae58928abb8b6ba79b28f198cd/635b1/Screen-Shot-2016-05-15-at-5.14.21-PM-1024x212.png\",\n    \"srcSet\": [\"/static/7af7d1ae58928abb8b6ba79b28f198cd/759d4/Screen-Shot-2016-05-15-at-5.14.21-PM-1024x212.png 105w\", \"/static/7af7d1ae58928abb8b6ba79b28f198cd/6a467/Screen-Shot-2016-05-15-at-5.14.21-PM-1024x212.png 210w\", \"/static/7af7d1ae58928abb8b6ba79b28f198cd/635b1/Screen-Shot-2016-05-15-at-5.14.21-PM-1024x212.png 420w\", \"/static/7af7d1ae58928abb8b6ba79b28f198cd/b2a12/Screen-Shot-2016-05-15-at-5.14.21-PM-1024x212.png 630w\", \"/static/7af7d1ae58928abb8b6ba79b28f198cd/04a72/Screen-Shot-2016-05-15-at-5.14.21-PM-1024x212.png 840w\", \"/static/7af7d1ae58928abb8b6ba79b28f198cd/3b243/Screen-Shot-2016-05-15-at-5.14.21-PM-1024x212.png 1024w\"],\n    \"sizes\": \"(max-width: 420px) 100vw, 420px\",\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(\"p\", null, \"Voila!!! We have two appium nodes connected to our selenium hub.\"), mdx(\"p\", null, \"In your test now, add the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"applicationName\"), \" as part of your desired capabilities and point to the grid url instead of appium url. For example, my DesiredCapabilities and driver instantiation would look like:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-java\"\n  }), \"DesiredCapabilities capabilities = new DesiredCapabilities();\\ncapabilities.setCapability(\\\"platformName\\\", \\\"Android\\\");\\ncapabilities.setCapability(\\\"deviceName\\\", \\\"Android\\\");\\ncapabilities.setCapability(\\\"applicationName\\\", \\\"Samsung S4\\\");\\ncapabilities.setCapability(\\\"app\\\", \\\"ApiDemos-debug.apk\\\");\\ncapabilities.setCapability(\\\"appPackage\\\", \\\"io.appium.android.apis\\\");\\ncapabilities.setCapability(\\\"appWaitActivity\\\", \\\"io.appium.android.apis.ApiDemos\\\");\\ncapabilities.setCapability(\\\"noReset\\\", true);\\ndriver = new AndroidDriver(new URL(\\\"http://<your ip>:4444/wd/hub/\\\"), capabilities);\\n\")), mdx(\"p\", null, \"This will execute tests on Samsung S4 device.\"), mdx(\"h2\", {\n    \"id\": \"mistakes-done-and-lessons-learnt\"\n  }, \"Mistakes done and Lessons learnt\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"applicationName\"), \" - I spent more time on solving this issue. I was using\\xA0\", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"dataProvider\"), \" to execute tests in parallel. Even I was having 2 nodes setup, always grid was routing my tests to one node only. This was the haunting problem. Make sure you have this applicationName in your capabilities. The selenium default capability matcher explains about this. Follow this blog for more information: \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://rationaleemotions.wordpress.com/2014/01/19/working-with-a-custom-capability-matcher-in-the-grid/\"\n  }), \"Rationale Emotions\"), \".\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"nodeconfig\"), \" - Even though you start your appium from the same directory where you placed the node config json files, you should provide the absolute path of the node config json for the parameter\\xA0\", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"-\", \"-nodeconfig\"), \" while starting your appium server.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"UDID\"), \" - Make sure you start your appium server with the\\xA0\", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"-\", \"U\"), \" parameter with your device id in case you have more than one device. The reason is appium always selects the first device in your device list.\")), mdx(\"p\", null, \"There will be a followup post on how I performed parallel execution using this grid setup. Coming Soon!!!\"));\n}\n;\nMDXContent.isMDXComponent = true;"},"card":null},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"5b89e2af-aa9b-523e-9372-c4a8586ea80b","excerpt":"Often we wanted to perform mobile execution in parallel. The best way of performing the parallel execution is through selenium grid. I've…","slug":"/selenium-grid-for-appium-mobile-automation/","title":"Selenium Grid for Appium mobile automation","date":"May 15, 2016","parent":{"parent":{"relativeDirectory":"selenium-grid-for-appium-mobile-automation"}},"relativeDirectory":"selenium-grid-for-appium-mobile-automation"}}}